<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.paint.Color?>

<AnchorPane fx:controller="tn.esprit.controllers.AffichageMedicaments"
            xmlns:fx="http://javafx.com/fxml"
            prefHeight="700.0" prefWidth="900.0"
            style="-fx-background-color: linear-gradient(to bottom right, #F8F9F9, #E3E9E9);">

   <VBox alignment="TOP_CENTER" spacing="20.0"
         AnchorPane.topAnchor="20.0" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0">

      <Label text="💊 Gestion des Matériels Médicaux"
             style="-fx-font-size: 34px; -fx-font-family: 'Roboto', sans-serif; -fx-font-weight: bold; -fx-text-fill: linear-gradient(to right, #1e6d9f, #5a9b97); -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0.4, 0, 3);"/>

      <HBox alignment="CENTER_LEFT" spacing="20.0"
            style="-fx-background-color: rgba(255, 255, 255, 0.85); -fx-padding: 20; -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0.4, 0, 5);">

         <TextField fx:id="searchField" promptText="🔍 Rechercher un Matériel..."
                    style="-fx-pref-width: 350px; -fx-font-size: 16px; -fx-font-weight: 500; -fx-background-radius: 15; -fx-padding: 12; -fx-border-color: #ccc; -fx-border-radius: 15; -fx-focus-color: #3498db;"/>

         <ComboBox fx:id="materielCombo" promptText="Sélectionner un matériel"
                   style="-fx-pref-width: 200px; -fx-font-size: 14px;"/>

         <Button onAction="#handleAssignMateriel" text="Assigner"
                 style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 15; -fx-pref-width: 100px;"/>

         <Button onAction="#handleAdd" text="➕" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 15; -fx-pref-width: 55px;"/>
         <Button onAction="#handleEdit" text="✏️" style="-fx-background-color: #2980b9; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 15; -fx-pref-width: 55px;"/>
         <Button onAction="#handleDelete" text="🗑️" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 15; -fx-pref-width: 55px;"/>
         <Button onAction="#handleExportExcel" text="📁" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-size: 18px; -fx-background-radius: 15; -fx-pref-width: 55px;"/>
      </HBox>

      <ListView fx:id="affichageMed" prefHeight="300.0" prefWidth="850.0"
                style="-fx-background-color: #ffffff; -fx-border-radius: 15; -fx-padding: 15;"/>

      <VBox spacing="10" style="-fx-background-color: rgba(255,255,255,0.9); -fx-background-radius: 15; -fx-padding: 15;">
         <Label text="Médicaments utilisant ce matériel" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #2a2a72;"/>
         <TableView fx:id="medicamentsTable" prefHeight="150" prefWidth="850">
            <columns>
               <TableColumn fx:id="colNom" text="Nom" prefWidth="200"/>
               <TableColumn fx:id="colClasse" text="Classe" prefWidth="200"/>
               <TableColumn fx:id="colPrix" text="Prix" prefWidth="150"/>
               <TableColumn fx:id="colMateriel" text="Matériel" prefWidth="300"/>
            </columns>
         </TableView>
      </VBox>

      <Pagination fx:id="pagination" prefWidth="400.0">
         <VBox.margin>
            <Insets top="20"/>
         </VBox.margin>
      </Pagination>

      <Label fx:id="filePathLabel"
             style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px; -fx-font-style: italic;"/>

      <TableView fx:id="excelTableView" visible="false" prefHeight="200.0" prefWidth="850.0"/>
   </VBox>
</AnchorPane>